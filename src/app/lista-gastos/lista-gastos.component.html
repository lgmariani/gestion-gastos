<!-- [scrollHeight]="'calc(100vh - 300px)'" -->
<!-- (onRowSelect)="onRowSelect($event)" -->

<div class="overflow-x-auto" *ngIf="!isMobile">
  <p-table
    #tablaGastos
    [value]="gastosPreview"
    [scrollable]="true"
    scrollHeight="75vh"
    [globalFilterFields]="['pagador', 'valor', 'titulo', 'categoria', 'fecha']"
    selectionMode="single"
    [(selection)]="selectedGasto"
    (onRowUnselect)="onRowUnselect($event)"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
  <!-- class="p-datatable-global" -->

  <ng-template pTemplate="caption">
    <div class="inline text-left">
      <p-button label="Recargar" icon="pi pi-refresh" iconPos="right" (onClick)="cargarGastos()" styleClass="text-white"></p-button>
    </div>

    <div class="inline float-right mr-3">
        <i class="pi pi-search mt-1 mr-1 text-white"></i>
        <input
            type="text"
            pInputText
            size="50"
            placeholder="Global Filter"
            (input)="tablaGastos.filterGlobal($any($event.target).value, 'contains')"
            class="w-auto"
        />
    </div>
  </ng-template>

    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Fecha</th>
        <th>Pagador</th>
        <th>Titulo</th>
        <th>Categoria</th>
        <th>Valor</th>
        <th>Repartido entre</th>
        <th>Editar</th>
        <th>Eliminar</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-gasto>
      <tr [pSelectableRow]="gasto">
        <td>{{ gasto.id }}</td>
        <td>{{ gasto.fecha }}</td>
        <td>{{ gasto.pagador }}</td>
        <td>{{ gasto.titulo }}</td>
        <td>{{ gasto.categoria }}</td>
        <td>{{ gasto.valor }}</td>
        <td>{{ gasto.repartirentre }}</td>
        <td><p-button icon="pi pi-user-edit" iconPos="right" (onClick)="editar(gasto.id)"></p-button></td>
        <td><p-button icon="pi pi-ban" iconPos="right" (onClick)="eliminar(gasto)"></p-button></td>
      </tr>
    </ng-template>
  </p-table>
  </div>

  <!-- Tarjetas visibles solo en mÃ³viles -->
  <div *ngIf="isMobile">
    <div class="mb-1 p-2 shadow rounded border-t-green-500" *ngFor="let gasto of gastosPreview" (click)="onRowSelect(gasto.id)" onKeyPress="" onKeyDown="" onKeyUp="">
      <div class="p-2">
        <div class="flex justify-between items-center flex-wrap">
          <h3 class="text-sm font-bold">{{ gasto.categoria }} - {{ gasto.titulo }}</h3>
          <h3 class="text-xs font-bold">Monto: {{ gasto.valor }}</h3>
        </div>
        <div class="flex justify-between items-center flex-wrap">
          <p class="mr-3 whitespace-nowrap mb-0 text-xs">Fecha: <span class="font-semibold">{{ gasto.fecha }}</span></p>
          <p class="mr-3 whitespace-nowrap mb-0 text-xs">Pagador: {{ gasto.pagador }}</p>
          <p class="mr-3 whitespace-nowrap mb-0 text-xs">Repartido entre: <span class="font-bold">{{ gasto.repartirentre }}</span></p>
        </div>
      </div>
    </div>
  </div>
